# TikTokPin

## 简介

这是一个 Python 脚本，用于监控指定的 TikTok 用户主页，抓取视频列表和相关数据（如播放量、发布时间等），并将结果保存到本地的 `logs` 文件夹中。

## 主要功能

1.  **读取用户列表：** 从 `user.txt` 文件中读取用户名列表，每行一个用户名。
2.  **访问用户主页：** 遍历用户列表，访问每个用户的主页地址（例如：`https://www.tiktok.com/@budgebuys`）。
3.  **抓取视频数据：** 从用户主页抓取前 10 个视频的发布时间、播放量、视频地址以及是否置顶。
4.  **保存数据：** 将抓取到的数据保存到 `logs` 文件夹下的用户特定文件夹中，每个用户一个文件夹，以当前记录时间为文件名保存数据到 `.txt` 文件。

## 使用方法

1.  **准备用户列表：**
    *   创建一个名为 `user.txt` 的文件。
    *   在 `user.txt` 文件中，每行添加一个要监控的 TikTok 用户名。例如：

    ```text
    tiktok
    budgebuys
    ```
2.  **配置代理（可选）：**
    *   如果需要使用代理，请设置 `HTTP_PROXY` 环境变量。例如：

    ```bash
    export HTTP_PROXY="http://your_proxy_address:your_proxy_port"
    ```
3.  **运行脚本：**

    ```bash
    python main.py
    ```

## 详细说明

*   **依赖库：**
    *   `playwright`: 用于自动化浏览器操作。
    *   `python-dotenv`: 用于读取 `.env` 文件中的环境变量。

    安装依赖库：

    ```bash
    pip install playwright python-dotenv
    playwright install chromium
    ```
*   **文件结构：**

    ```text
    TikTokPin/
    ├── main.py       # 主脚本文件
    ├── user.txt      # 用户名列表
    ├── logs/         # 存放抓取结果的目录
    │   └── username/ # 每个用户一个目录
    │       └── 2024-06-23_12-34-56.txt # 抓取结果文件
    └── README.md     # 说明文档
    ```
*   **输出文件：**

    每个用户的数据保存在 `logs/username/` 目录下，文件名为当前时间戳。文件中包含用户账号、昵称、最新更新时间、记录时间和视频列表信息。

    示例输出文件内容：

    ```text
    用户账号: @username
    用户昵称: Nickname
    最新更新: 2024-06-23 12:34:56
    记录时间: 2024-06-23 12:34:56
    ----------------------------------------

    --- 视频 1 ---
    是否置顶: 否
    发布时间: 2024-06-22 12:00:00
    播放量: 1.2M
    视频地址: https://www.tiktok.com/@username/video/1234567890

    --- 视频 2 ---
    是否置顶: 是
    发布时间: 2024-06-21 18:00:00
    播放量: 2.5M
    视频地址: https://www.tiktok.com/@username/video/0987654321
    ```

## 注意事项

*   **人机验证：** 脚本运行时可能会遇到 TikTok 的人机验证（CAPTCHA）。如果出现这种情况，请手动完成验证，然后按 Enter 键继续。
*   **登录/Cookie 协议：** 某些情况下，可能会弹出登录或 Cookie 协议窗口，遮挡页面内容。请手动处理这些窗口，然后按 Enter 键继续。
*   **用户不存在：** 如果页面显示 "找不到用户" 或其他错误信息，请检查 `user.txt` 文件中的用户名是否正确。
*   **代理问题：** 如果使用代理，请确保代理服务器正常工作，并且网络连接畅通。

